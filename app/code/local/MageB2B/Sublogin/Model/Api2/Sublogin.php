<?php

class
MageB2B_Sublogin_Model_Api2_Sublogin
extends
Mage_Api2_Model_Resource
{
const
RESOURCE_CREATED_SUCCESSFUL
=
'Resource created successful.';

public
function
_retrieveCollection()
{
$this->validateAccess();
$_85b73c34e466d0c344b7dbb8bdcebf348b76724b
=
array();
$_205d95c001c842f933e3b55fa4e902d5d2fdd0af
=
Mage::getModel('sublogin/sublogin')->getCollection();
if
($this->getRequest()->getParam('id'))
{
$_205d95c001c842f933e3b55fa4e902d5d2fdd0af->addFieldToFilter('id',
$this->getRequest()->getParam('id'));
}
foreach
($_205d95c001c842f933e3b55fa4e902d5d2fdd0af
as
$_4e45fa4f3249d9c3cc1314ed89922593008cf117)
{
$_85b73c34e466d0c344b7dbb8bdcebf348b76724b[$_4e45fa4f3249d9c3cc1314ed89922593008cf117->getId()]
=
$_4e45fa4f3249d9c3cc1314ed89922593008cf117->getData();
}
return
$_85b73c34e466d0c344b7dbb8bdcebf348b76724b;
}

protected
function
_retrieve()
{
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f
=
Mage::getModel('sublogin/sublogin')->load($this->getRequest()->getParam('id'));
return
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->getData();
}

public
function
_create($_461e9bac5c124e13e943d74294b5b3c23e91e59a)
{
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f
=
Mage::getModel('sublogin/sublogin');
if
($_17fe0f58f521a1d8d613a93097a5a22f2074c04f->load($_461e9bac5c124e13e943d74294b5b3c23e91e59a['id'])->getId())
{
$this->_critical(Mage::helper('sublogin')->__('This entity ID %s already exists. Please use PUT method to update.',
$_461e9bac5c124e13e943d74294b5b3c23e91e59a['id']),
Mage_Api2_Model_Server::HTTP_INTERNAL_ERROR);
}
if
(isset($_461e9bac5c124e13e943d74294b5b3c23e91e59a['password']))
{
$_461e9bac5c124e13e943d74294b5b3c23e91e59a['password']
=
Mage::helper('core')->getHash($_461e9bac5c124e13e943d74294b5b3c23e91e59a['password'],
2);
}
foreach
($_461e9bac5c124e13e943d74294b5b3c23e91e59a
as
$_3f8de01169eabbb582c7c5ffb762d5f7d1f1bf07
=>
$_101966cc6117772941ef274d5dfb132cb8452d0a)
{
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->setData($_3f8de01169eabbb582c7c5ffb762d5f7d1f1bf07,
$_101966cc6117772941ef274d5dfb132cb8452d0a);
}
try
{
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->save();
$this->_successMessage(
$this::RESOURCE_CREATED_SUCCESSFUL,
Mage_Api2_Model_Server::HTTP_OK,
array(
'id'
=>
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->getId(),
)
);
}
catch
(Exception
$_68dc3926fdadefc4ea3e5e09bf1dd6f6e1785aa5)
{
$this->_critical(self::RESOURCE_INTERNAL_ERROR);
}
}

protected
function
_multiCreate(array
$_461e9bac5c124e13e943d74294b5b3c23e91e59a)
{
foreach
($_461e9bac5c124e13e943d74294b5b3c23e91e59a
as
$_5ba51907b3dada8dd043b8e056d7b90059bca560)
{
if
(!is_array($_5ba51907b3dada8dd043b8e056d7b90059bca560))
{
$this->_errorMessage(self::RESOURCE_DATA_INVALID,
Mage_Api2_Model_Server::HTTP_BAD_REQUEST);
$this->_critical(self::RESOURCE_DATA_PRE_VALIDATION_ERROR);
}
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f
=
Mage::getModel('sublogin/sublogin');
if
($_17fe0f58f521a1d8d613a93097a5a22f2074c04f->load($_5ba51907b3dada8dd043b8e056d7b90059bca560['id'])->getId())
{
$this->_critical(Mage::helper('sublogin')->__('This entity ID %s already exists. Please use PUT method to update.',
$_5ba51907b3dada8dd043b8e056d7b90059bca560['id']),
Mage_Api2_Model_Server::HTTP_INTERNAL_ERROR);
}
if
(isset($_5ba51907b3dada8dd043b8e056d7b90059bca560['password']))
$_5ba51907b3dada8dd043b8e056d7b90059bca560['password']
=
Mage::helper('core')->getHash($_5ba51907b3dada8dd043b8e056d7b90059bca560['password'],
2);
foreach
($_5ba51907b3dada8dd043b8e056d7b90059bca560
as
$_3f8de01169eabbb582c7c5ffb762d5f7d1f1bf07
=>
$_101966cc6117772941ef274d5dfb132cb8452d0a)
{
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->setData($_3f8de01169eabbb582c7c5ffb762d5f7d1f1bf07,
$_101966cc6117772941ef274d5dfb132cb8452d0a);
}
try
{
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->save();
$this->_successMessage(
Mage_Api2_Model_Resource::RESOURCE_UPDATED_SUCCESSFUL,
Mage_Api2_Model_Server::HTTP_OK,
array(
'id'
=>
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->getId(),
)
);
}
catch
(Exception
$_68dc3926fdadefc4ea3e5e09bf1dd6f6e1785aa5)
{
$this->_critical(self::RESOURCE_INTERNAL_ERROR);
}
}
}

protected
function
_update(array
$_461e9bac5c124e13e943d74294b5b3c23e91e59a)
{
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f
=
Mage::getModel('sublogin/sublogin')->load($this->getRequest()->getParam('id'));
if
(!$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->getId())
{
$this->_critical(Mage::helper('sublogin')->__('This entity ID doesn\'t exist'),
Mage_Api2_Model_Server::HTTP_INTERNAL_ERROR);
}
if
(isset($_461e9bac5c124e13e943d74294b5b3c23e91e59a['password']))
$_461e9bac5c124e13e943d74294b5b3c23e91e59a['password']
=
Mage::helper('core')->getHash($_461e9bac5c124e13e943d74294b5b3c23e91e59a['password'],
2);
foreach($_461e9bac5c124e13e943d74294b5b3c23e91e59a
as
$_3f8de01169eabbb582c7c5ffb762d5f7d1f1bf07=>$_101966cc6117772941ef274d5dfb132cb8452d0a)
{
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->setData($_3f8de01169eabbb582c7c5ffb762d5f7d1f1bf07,
$_101966cc6117772941ef274d5dfb132cb8452d0a);
}
try
{
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->save();
$this->_successMessage(
self::RESOURCE_UPDATED_SUCCESSFUL,
Mage_Api2_Model_Server::HTTP_OK,
array(
'id'
=>
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->getId(),
)
);
}
catch
(Mage_Core_Exception
$_68dc3926fdadefc4ea3e5e09bf1dd6f6e1785aa5)
{
$this->_error($_68dc3926fdadefc4ea3e5e09bf1dd6f6e1785aa5->getMessage(),
Mage_Api2_Model_Server::HTTP_INTERNAL_ERROR);
}
catch
(Exception
$_68dc3926fdadefc4ea3e5e09bf1dd6f6e1785aa5)
{
$this->_critical(self::RESOURCE_INTERNAL_ERROR);
}
}

protected
function
_multiUpdate(array
$_461e9bac5c124e13e943d74294b5b3c23e91e59a)
{
foreach
($_461e9bac5c124e13e943d74294b5b3c23e91e59a
as
$_5ba51907b3dada8dd043b8e056d7b90059bca560)
{
if
(!is_array($_5ba51907b3dada8dd043b8e056d7b90059bca560))
{
$this->_errorMessage(self::RESOURCE_DATA_INVALID,
Mage_Api2_Model_Server::HTTP_BAD_REQUEST);
$this->_critical(self::RESOURCE_DATA_PRE_VALIDATION_ERROR);
}
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f
=
Mage::getModel('sublogin/sublogin')->load($_5ba51907b3dada8dd043b8e056d7b90059bca560['id']);
if
(!$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->getId())
{
$this->_critical(Mage::helper('sublogin')->__('This entity ID doesn\'t exist'),
Mage_Api2_Model_Server::HTTP_INTERNAL_ERROR);
}
if
(isset($_5ba51907b3dada8dd043b8e056d7b90059bca560['password']))
$_5ba51907b3dada8dd043b8e056d7b90059bca560['password']
=
Mage::helper('core')->getHash($_5ba51907b3dada8dd043b8e056d7b90059bca560['password'],
2);
foreach($_5ba51907b3dada8dd043b8e056d7b90059bca560
as
$_3f8de01169eabbb582c7c5ffb762d5f7d1f1bf07=>$_101966cc6117772941ef274d5dfb132cb8452d0a)
{
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->setData($_3f8de01169eabbb582c7c5ffb762d5f7d1f1bf07,
$_101966cc6117772941ef274d5dfb132cb8452d0a);
}
try
{
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->save();
$this->_successMessage(
self::RESOURCE_UPDATED_SUCCESSFUL,
Mage_Api2_Model_Server::HTTP_OK,
array('entity_id'
=>
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->getId())
);
}
catch
(Mage_Core_Exception
$_68dc3926fdadefc4ea3e5e09bf1dd6f6e1785aa5)
{
$this->_error($_68dc3926fdadefc4ea3e5e09bf1dd6f6e1785aa5->getMessage(),
Mage_Api2_Model_Server::HTTP_INTERNAL_ERROR);
}
catch
(Exception
$_68dc3926fdadefc4ea3e5e09bf1dd6f6e1785aa5)
{
$this->_critical(self::RESOURCE_INTERNAL_ERROR);
}
}
}

protected
function
_delete()
{
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f
=
Mage::getModel('sublogin/sublogin')->load($this->getRequest()->getParam('id'));
if
(!$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->getId())
{
$this->_critical(Mage::helper('sublogin')->__('This entity ID doesn\'t exist'),
Mage_Api2_Model_Server::HTTP_INTERNAL_ERROR);
}
try
{
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->delete();
echo
Mage::helper('sublogin')->__('Data set with entity ID %s successfully deleted.',
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->getId());
}
catch
(Mage_Core_Exception
$_68dc3926fdadefc4ea3e5e09bf1dd6f6e1785aa5)
{
$this->_critical($_68dc3926fdadefc4ea3e5e09bf1dd6f6e1785aa5->getMessage(),
Mage_Api2_Model_Server::HTTP_INTERNAL_ERROR);
}
catch
(Exception
$_68dc3926fdadefc4ea3e5e09bf1dd6f6e1785aa5)
{
$this->_critical(self::RESOURCE_INTERNAL_ERROR);
}
}

protected
function
_multiDelete(array
$_461e9bac5c124e13e943d74294b5b3c23e91e59a)
{
$_806438c4a4e343d3d8719d7c9a9d2e19e25c99bd
=
array();
foreach
($_461e9bac5c124e13e943d74294b5b3c23e91e59a
as
$_5ba51907b3dada8dd043b8e056d7b90059bca560)
{
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f
=
Mage::getModel('sublogin/sublogin')->load($_5ba51907b3dada8dd043b8e056d7b90059bca560['id']);
if
(!$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->getId())
{
$this->_critical(Mage::helper('sublogin')->__('This entity ID doesn\'t exist'),
Mage_Api2_Model_Server::HTTP_INTERNAL_ERROR);
}
try
{
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->delete();
$_806438c4a4e343d3d8719d7c9a9d2e19e25c99bd[]
=
$_17fe0f58f521a1d8d613a93097a5a22f2074c04f->getId();
}
catch
(Mage_Core_Exception
$_68dc3926fdadefc4ea3e5e09bf1dd6f6e1785aa5)
{
$this->_critical($_68dc3926fdadefc4ea3e5e09bf1dd6f6e1785aa5->getMessage(),
Mage_Api2_Model_Server::HTTP_INTERNAL_ERROR);
}
catch
(Exception
$_68dc3926fdadefc4ea3e5e09bf1dd6f6e1785aa5)
{
$this->_critical(self::RESOURCE_INTERNAL_ERROR);
}
}
echo
Mage::helper('sublogin')->__('Data set with entity IDs %s successfully deleted.',
implode(',',$_806438c4a4e343d3d8719d7c9a9d2e19e25c99bd));
}
}
